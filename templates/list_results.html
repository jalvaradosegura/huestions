{% extends "base.html" %}

{% load static %}
{% load i18n %}
{% load l10n %}

{% block main %}

{{ shared_alternatives }}
{% url 'answer_list' questionlist.slug user as list_url %}
{% with domain_url=request.get_host %}
  <h1 class="text-center">{{ questionlist }} - {% trans "results" %}! <button data-toggle="tooltip" onclick="copyToClipboard('{{ domain_url }}{{ list_url }}')" class="btn btn-outline-secondary btn-sm">{% trans "Share list" %}</button></h1>
{% endwith %}

{% localize off %}
<div class="row">
  {% for i in questions_and_user_alternatives %}
    {% with question=i.0 user_alternative=i.1 %}

    <div class="card mr-1 mt-1" style="">
        <div class="card-body">
	  <h5 class="card-title">{{ forloop.counter }}) {{ question.title }}</h5>
	  <h6 class="card-subtitle mb-2 text-muted">{{  question.get_amount_of_users_that_have_voted }} vote{{ question.get_amount_of_users_that_have_voted|pluralize }}</h6>
	  <div class="progress">
            {% with  question.alternatives.all.0 as alternative_1 %}
              <div class="progress-bar bg-success" role="progressbar" style="width: {{ alternative_1.get_votes_percentage }}%;" aria-valuenow="{{ alternative_1.get_votes_percentage }}" aria-valuemin="0" aria-valuemax="100">{{ alternative_1 }} &middot {{ alternative_1.get_votes_percentage }}%</div>
            {% endwith %}
          </div>
	  <div class="progress mt-1">
            {% with  question.alternatives.all.1 as alternative_2 %}
              <div class="progress-bar bg-success" role="progressbar" style="width: {{ alternative_2.get_votes_percentage }}%;" aria-valuenow="{{ alternative_2.get_votes_percentage }}" aria-valuemin="0" aria-valuemax="100">{{ alternative_2 }} &middot {{ alternative_2.get_votes_percentage }}%</div>
            {% endwith %}
          </div>
	  <p><strong>{% trans "Your vote" %}:</strong> {{ user_alternative }}</p>
	  {% if shared_user %}
	    <p><strong>{% blocktrans %}{{ shared_user }}'s vote{% endblocktrans %}:</strong> {{ i.2 }}</p>
	  {% endif %}

        </div>
    </div>

    {% endwith %}

    <br>

  {% endfor %}
</div>
{% endlocalize %}

{% block bootstrap_js_loaded %}
  <script src="{% static 'js/copy_to_clipboard.js' %}" type="text/javascript"></script>
{% endblock bootstrap_js_loaded %}


{% endblock %}
