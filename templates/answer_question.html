{% extends "base.html" %}

{% load static %}

{% block main %}

<h1 class="text-center">{{ questionlist.title }}</h1>

<div class="progress">
  <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar" aria-valuenow="{{ percentage }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ percentage }}%"></div>
</div>

<br>

{% for question in questions %}
  <h1>{{ question.title }}</h1>
  <div class="form-check form-check-inline">
  <form action="" method="post">
    {% csrf_token %}
    {{ form }}
    <input type="hidden" name="question_list_id" value="{{ questionlist.id }}">
    {% if questions.has_next %}
      <input type="hidden" name="next_page" value="{{ questions.next_page_number }}">
    {% endif %}
    <button id="button_to_vote" class="btn btn-success">Answer</button>
  </form>
  </div>
{% endfor %}

<div class="pagination">
  <span class="step-links">
    {% if questions.has_previous %}
      <a href="?page=1">&laquo; first</a>
      <a href="?page={{ questions.previous_page_number }}">previous</a>
    {% endif %}

    <span class="current" id="current_question">
      Page {{ questions.number }} of {{ questions.paginator.num_pages }}.
    </span>

    {% if questions.has_next %}
      <a href="?page={{ questions.next_page_number }}">next</a>
      <a href="?page={{ questions.paginator.num_pages }}">last &raquo;</a>
    {% endif %}
  </span>
</div>

<button data-toggle="tooltip" onclick="copyToClipboard('{{ request.build_absolute_uri }}')" class="btn btn-secondary btn-sm">Share list</button>
<script src="{% static 'js/share_list.js' %}" type="text/javascript"></script>

{% block bootstrap_js_loaded %}
  <script src="{% static 'js/copy_to_clipboard.js' %}" type="text/javascript"></script>
{% endblock bootstrap_js_loaded %}

{% endblock main %}
